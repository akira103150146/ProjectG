<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="js/createtable.js"></script>
    <script>
       
       
        $(document).ready(function () {
               $("#add-memberbtn").click(function () {
                    var $clone = '<tr><td contenteditable="true">undefined</td><td contenteditable="true">undefined</td><td contenteditable="true">undefined</td><td contenteditable="true">undefined</td><td contenteditable="true">undefined</td><td><button>編輯</button><button>刪除</button></td></tr>'
                    $('#target').append($clone);    
                        
                });
        });
            
    </script>

    <script>
        
      

        var showtable = function(){
             var text = '{ "employees": [' +
                '{ "MemberName":"John", "MemberNum":"abc123","ID":"abc","Date":"1987/07/09","Permission":"3" },' +
                '{ "MemberName":"Steve", "MemberNum":"abc456","ID":"www","Date":"1987/07/19","Permission":"2" },' +
                '{ "MemberName":"John", "MemberNum":"abc789","ID":"xyz","Date":"1987/08/09","Permission":"1" } ] }';

            var obj = JSON.parse(text);

            document.getElementById('test').innerHTML = obj.employees[1].MemberName + " " + obj.employees[1].MemberNum;
            var table = document.getElementById('target');
            var tr = document.createElement('tr');
            for(var i =0;i<3;i++){
                var tr = document.createElement('tr');
                var td = [];
                var txt = [];
                txt.push(document.createTextNode(obj.employees[i].MemberName));
                txt.push(document.createTextNode(obj.employees[i].MemberNum));
                txt.push(document.createTextNode(obj.employees[i].ID));
                txt.push(document.createTextNode(obj.employees[i].Date));
                txt.push(document.createTextNode(obj.employees[i].Permission));
                

                for(var j=0;j<6;j++){
                    td.push(document.createElement('td'));
                   
                    if(j!=5){                        
                        td[j].appendChild(txt[j]);
                        td[j].contentEditable = "true";
                    }
                    else{
                        var btn = document.createElement('BUTTON');
                        var t = document.createTextNode('編輯');
                        btn.appendChild(t);
                        var btn2 = document.createElement('BUTTON');
                        var t2 = document.createTextNode('刪除');
                        btn2.appendChild(t2);
                        td[j].appendChild(btn);
                        td[j].appendChild(btn2);
                    }

                    tr.appendChild(td[j]);         
                }
                table.appendChild(tr);
            }
           

        }
    </script>
    <style>
        th,
        td {
            border: 1px solid black;
            margin: 2px;
            height: 50px;
        }
    
        table {
            width: 100%;
        }
    </style>
</head>
<body>
       <div class="search">
          
            <form>
                人員姓名
                <input type="text" name="人員姓名">
                人員編號
                <input type="text" name="人員編號">
                人員身分
                <input type="text" name="人員身分">
            </form>
                 
                 <button>查詢</button>
       </div>

       <div>
           <button id="add-memberbtn" style="float:right;">新增人員</button>
           <button onClick="showtable()">test</button>
       </div>

       <div style="height:500px;">
           <p id="test">xxx</p>
            <table id="target">
                <tbody>
                    <tr>
                        <th>人員姓名</th>
                        <th>人員編號</th>
                        <th>身分</th>
                        <th>權限</th>
                        <th>建立日期</th>
                        <th></th>
                    </tr>
                
                    <tr>
                        <td contenteditable="true">王小名</td>
                        <td contenteditable="true">abc123</td>
                        <td contenteditable="true">檢驗人員</td>
                        <td contenteditable="true">檢驗人員</td>
                        <td contenteditable="true">2017/7/31</td>
                        <td>
                        <button>編輯</button>
                        <button>刪除</button>
                        </td>

                    </tr>            
                </tbody>
            </table>
       </div>

      
</body>
</html>