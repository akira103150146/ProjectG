<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/table_standard.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/sidebar.css" type="text/css" media="screen" />
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script>
        let $ = require('jquery')
        let jQuery = require('jquery')      
    </script>
    <script src="js/app/showtable.js"></script>
    <script src="js/app/sidebar.js"></script>
    <script>
        var ipcrender = require('electron').ipcRenderer
        var tb_manager = new table_manager() 
            ipcrender.on('reply-Cpn',(event,info)=>{
                localStorage.list_info = JSON.stringify(info)//將傳入list存入local
                console.log(localStorage.list_info)
                tb_manager.showtable(info,'Cpn')
            })
            ipcrender.on('reply-Cpn-type',(event,info)=>{ //將資料庫的類別都加入option               
                info.forEach((e)=>{
                    var op = document.createElement('option')
                    op.textContent = e.name
                    $('#selection')[0].appendChild(op)
                })                
            })
            $(document).ready(function () {
                ipcrender.send('ready-to-show', 'Cpn_type')
                ipcrender.send('ready-to-show', 'Cpn')
                tb_manager.add_cell('#add-btn', 'info')
                tb_manager.delete_cell('#target', 'info');
                tb_manager.save('#target', 'info')
                sidebar_setup('info')
                $('#add-classfication').click(function(){
                    if($('#class-input')[0].value != ''){
                        var op = document.createElement('option')
                        op.textContent = $('#class-input')[0].value;
                        $('#selection')[0].appendChild(op)
                        let obj = {'name': op.textContent}
                        ipcrender.send('add','Cpn-type',obj,0)
                    }
                    else
                        alert('輸入為空')
                })
            });
    </script>
</head>
<body>
       <div class="wrapper">
            <nav id="sidebar">
                <div class="sidebar-header">
                    <h3 id="close_btn">Close &times;</h3>
                    <h3 id="user-name">AKIRA</h3>
                    <button id="logout_btn">登出</button>
                </div>
                <ul id = "sidebar-option">                
                </ul>
            </nav>
            <div class="content">
                <input id="class-input" type="text">
                <button id="add-classfication">新增類別</button>
                <select id="selection">                    
                </select>
                <div>
                    <button id="add-btn" style="float:right;">新增庫存</button>
                </div>
                <table id="target">
                    <tbody>
                        <tr>
                            <th>零件名稱</th>
                            <th>零件料號</th>
                            <th>數量</th>                                                       
                            <th></th>
                        </tr>                        
                    </tbody>
                </table>
            </div>

       </div>
      
</body>
</html>
      