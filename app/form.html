<html>
<head>    
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/form.css" type="text/css" media="screen" />
    <link href="jQuery-contextMenu-master/dist/jquery.contextMenu.css" rel="stylesheet" type="text/css" />
    <script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <script>
        let $ = require('jquery')
        let jQuery = require('jquery')      
    </script>
    <script type="text/javascript" src="js/lib/header.js"></script>
    <script type="text/javascript" src="js/lib/redips-table-min.js"></script>
    <script type="text/javascript" src="js/lib/script.js"></script>      
    <script src="jQuery-contextMenu-master/dist/jquery.contextMenu.js" type="text/javascript"></script>
    <script>       
        $(function () {
            $('#mainTable').contextMenu({
                selector: 'td',
                items: {
                    "SetToNotChangeAble": {
                        name: "設為不可填", icon: "edit", callback: function () {
                            $(this)[0].contentEditable = false;
                        }
                    },
                    "SetToChangeAble": {
                        name: "設為可填", icon: "edit", callback: function () {
                            $(this)[0].contentEditable = true;
                        }
                    },
                    "add": {
                        name: "新增", icon: "paste",
                        items: {
                            "checkbox": {
                                name: "勾選格", callback: function () {
                                    var i = document.createElement('INPUT');
                                    i.setAttribute("type", "checkbox");
                                    $(this).append(i);
                                }
                            },
                            "image": {
                                name: "圖片上傳", callback: function () {
                                    var i = document.createElement('INPUT');
                                    i.setAttribute("type", "file");
                                    $(this).append(i);

                                }
                            }
                        }
                    },
                    "delete": { name: "Delete", icon: "delete" },
                    "sep1": "---------",
                    "quit": { name: "Quit", icon: function ($element, key, item) { return 'context-menu-icon context-menu-icon-quit'; } }
                }
            });
        });
    </script>  
</head>
<body>    
    <div id="myContainer">       
        <table id="toolbox">
            <tbody>
                <tr>
                    <td>
                        <input type="button" value="合併儲存格" class="button" onclick="redips.merge()" title="Merge marked table cells horizontally and verically"
                        />
                    </td>
                    <td>
                        <input type="button" value="水平分割儲存格" class="button" onclick="redips.split('h')" title="Split marked table cell horizontally"
                        />
                        <input type="button" value="垂直分割儲存格" class="button" onclick="redips.split('v')" title="Split marked table cell vertically"
                        />                        
                    </td>
                    <td>
                        <input type="button" value="新增列" class="button" onclick="redips.row('insert')" title="Add table row" />
                        <input type="button" value="刪除列" class="button" onclick="redips.row('delete')" title="Delete table row" />
                    </td>
                    <td>
                        <input type="button" value="新增行" class="button" onclick="redips.column('insert')" title="Add table column" />
                        <input type="button" value="刪除行" class="button" onclick="redips.column('delete')" title="Delete table column" />
                    </td>
                </tr>
            </tbody>
        </table>
        <table id="mainTable">            
            <tbody>
                <tr>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>                   
                </tr>                
            </tbody>
        </table>
    </div>
</body>
</html>